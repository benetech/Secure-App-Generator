module.exports=setUser;var Conf=require("../npmconf.js").Conf;var assert=require("assert");var path=require("path");var fs=require("fs");var mkdirp=require("mkdirp");function setUser(a){var c=this.root;assert(c!==Object.prototype);if(this.get("global")){return a()}if(process.env.SUDO_UID){c.user=+(process.env.SUDO_UID);return a()}var b=path.resolve(this.get("prefix"));mkdirp(b,function(d){if(d){return a(d)}fs.stat(b,function(f,e){c.user=e&&e.uid;return a(f)})})};