exports.alphasort=alphasort;exports.alphasorti=alphasorti;exports.setopts=setopts;exports.ownProp=ownProp;exports.makeAbs=makeAbs;exports.finish=finish;exports.mark=mark;exports.isIgnored=isIgnored;exports.childrenIgnored=childrenIgnored;function ownProp(b,a){return Object.prototype.hasOwnProperty.call(b,a)}var path=require("path");var minimatch=require("minimatch");var isAbsolute=require("path-is-absolute");var Minimatch=minimatch.Minimatch;function alphasorti(d,c){return d.toLowerCase().localeCompare(c.toLowerCase())}function alphasort(d,c){return d.localeCompare(c)}function setupIgnores(a,b){a.ignore=b.ignore||[];if(!Array.isArray(a.ignore)){a.ignore=[a.ignore]}if(a.ignore.length){a.ignore=a.ignore.map(ignoreMap)}}function ignoreMap(c){var a=null;if(c.slice(-3)==="/**"){var b=c.replace(/(\/\*\*)+$/,"");a=new Minimatch(b)}return{matcher:new Minimatch(c),gmatcher:a}}function setopts(a,d,b){if(!b){b={}}if(b.matchBase&&-1===d.indexOf("/")){if(b.noglobstar){throw new Error("base matching requires globstar")}d="**/"+d}a.silent=!!b.silent;a.pattern=d;a.strict=b.strict!==false;a.realpath=!!b.realpath;a.realpathCache=b.realpathCache||Object.create(null);a.follow=!!b.follow;a.dot=!!b.dot;a.mark=!!b.mark;a.nodir=!!b.nodir;if(a.nodir){a.mark=true}a.sync=!!b.sync;a.nounique=!!b.nounique;a.nonull=!!b.nonull;a.nosort=!!b.nosort;a.nocase=!!b.nocase;a.stat=!!b.stat;a.noprocess=!!b.noprocess;a.maxLength=b.maxLength||Infinity;a.cache=b.cache||Object.create(null);a.statCache=b.statCache||Object.create(null);a.symlinks=b.symlinks||Object.create(null);setupIgnores(a,b);a.changedCwd=false;var c=process.cwd();if(!ownProp(b,"cwd")){a.cwd=c}else{a.cwd=b.cwd;a.changedCwd=path.resolve(b.cwd)!==c}a.root=b.root||path.resolve(a.cwd,"/");a.root=path.resolve(a.root);if(process.platform==="win32"){a.root=a.root.replace(/\\/g,"/")}a.nomount=!!b.nomount;b.nonegate=b.nonegate===false?false:true;b.nocomment=b.nocomment===false?false:true;deprecationWarning(b);a.minimatch=new Minimatch(d,b);a.options=a.minimatch.options}exports.deprecationWarned;function deprecationWarning(a){if(!a.nonegate||!a.nocomment){if(process.noDeprecation!==true&&!exports.deprecationWarned){var b="glob WARNING: comments and negation will be disabled in v6";if(process.throwDeprecation){throw new Error(b)}else{if(process.traceDeprecation){console.trace(b)}else{console.error(b)}}exports.deprecationWarned=true}}}function finish(c){var g=c.nounique;var f=g?[]:Object.create(null);for(var d=0,b=c.matches.length;d<b;d++){var h=c.matches[d];if(!h||Object.keys(h).length===0){if(c.nonull){var e=c.minimatch.globSet[d];if(g){f.push(e)}else{f[e]=true}}}else{var a=Object.keys(h);if(g){f.push.apply(f,a)}else{a.forEach(function(i){f[i]=true})}}}if(!g){f=Object.keys(f)}if(!c.nosort){f=f.sort(c.nocase?alphasorti:alphasort)}if(c.mark){for(var d=0;d<f.length;d++){f[d]=c._mark(f[d])}if(c.nodir){f=f.filter(function(i){return !(/\/$/.test(i))})}}if(c.ignore.length){f=f.filter(function(i){return !isIgnored(c,i)})}c.found=f}function mark(d,g){var b=makeAbs(d,g);var i=d.cache[b];var a=g;if(i){var h=i==="DIR"||Array.isArray(i);var f=g.slice(-1)==="/";if(h&&!f){a+="/"}else{if(!h&&f){a=a.slice(0,-1)}}if(a!==g){var e=makeAbs(d,a);d.statCache[e]=d.statCache[b];d.cache[e]=d.cache[b]}}return a}function makeAbs(b,c){var a=c;if(c.charAt(0)==="/"){a=path.join(b.root,c)}else{if(isAbsolute(c)||c===""){a=c}else{if(b.changedCwd){a=path.resolve(b.cwd,c)}else{a=path.resolve(c)}}}return a}function isIgnored(a,b){if(!a.ignore.length){return false}return a.ignore.some(function(c){return c.matcher.match(b)||!!(c.gmatcher&&c.gmatcher.match(b))})}function childrenIgnored(a,b){if(!a.ignore.length){return false}return a.ignore.some(function(c){return !!(c.gmatcher&&c.gmatcher.match(b))})};