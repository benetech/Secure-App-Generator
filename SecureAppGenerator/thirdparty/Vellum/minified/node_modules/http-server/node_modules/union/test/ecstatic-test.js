var assert=require("assert"),ecstatic=require("ecstatic")(__dirname+"/fixtures/static"),request=require("request"),vows=require("vows"),union=require("../");vows.describe("union/ecstatic").addBatch({"When using union with ecstatic":{topic:function(){union.createServer({before:[ecstatic]}).listen(18082,this.callback)},"a request to /some-file.txt":{topic:function(){request({uri:"http://localhost:18082/some-file.txt"},this.callback)},"should respond with `hello world`":function(t,e,s){assert.isNull(t),assert.equal(s,"hello world\n")}},"a request to /404.txt (which does not exist)":{topic:function(){request({uri:"http://localhost:18082/404.txt"},this.callback)},"should respond with 404 status code":function(t,e){assert.isNull(t),assert.equal(e.statusCode,404)}}}})["export"](module);