define(["./core","./var/rnotwhite"],function(d,b){var c={};function a(f){var e=c[f]={};d.each(f.match(b)||[],function(h,g){e[g]=true});return e}d.Callbacks=function(o){o=typeof o==="string"?(c[o]||a(o)):d.extend({},o);var i,h,e,j,k,g,l=[],m=!o.once&&[],f=function(p){h=o.memory&&p;e=true;k=g||0;g=0;j=l.length;i=true;for(;l&&k<j;k++){if(l[k].apply(p[0],p[1])===false&&o.stopOnFalse){h=false;break}}i=false;if(l){if(m){if(m.length){f(m.shift())}}else{if(h){l=[]}else{n.disable()}}}},n={add:function(){if(l){var q=l.length;(function p(r){d.each(r,function(t,s){var u=d.type(s);if(u==="function"){if(!o.unique||!n.has(s)){l.push(s)}}else{if(s&&s.length&&u!=="string"){p(s)}}})})(arguments);if(i){j=l.length}else{if(h){g=q;f(h)}}}return this},remove:function(){if(l){d.each(arguments,function(r,p){var q;while((q=d.inArray(p,l,q))>-1){l.splice(q,1);if(i){if(q<=j){j--}if(q<=k){k--}}}})}return this},has:function(p){return p?d.inArray(p,l)>-1:!!(l&&l.length)},empty:function(){l=[];j=0;return this},disable:function(){l=m=h=undefined;return this},disabled:function(){return !l},lock:function(){m=undefined;if(!h){n.disable()}return this},locked:function(){return !m},fireWith:function(q,p){if(l&&(!e||m)){p=p||[];p=[q,p.slice?p.slice():p];if(i){m.push(p)}else{f(p)}}return this},fire:function(){n.fireWith(this,arguments);return this},fired:function(){return !!e}};return n};return d});